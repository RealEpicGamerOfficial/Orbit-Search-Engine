<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbit Search Browser | by Real_EpicGamer</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü™ê</text></svg>">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom focus styles for better visibility on dark bg */
        .focus-orbit:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5); /* blue-500 with 50% opacity */
        }
        /* Custom radio button styles */
        .search-engine-radio:checked + label {
            background-color: #4f46e5; /* blue-600 */
            border-color: #6366f1; /* blue-500 */
            color: white;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Main Search Card -->
    <div class="bg-gray-800 p-8 rounded-xl shadow-2xl w-full max-w-lg border border-gray-700 mb-8">
        
        <!-- Header -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold text-blue-400 mb-2">Orbit</h1>
            <p class="text-lg text-gray-300">Search the web.</p>
            <p class="text-lg text-lightgray-300">Instant searching, no account, minimal tracking.</p>
        </div>

        <!-- Search Form -->
        <div class="space-y-4">
            <!-- Input Field -->
            <div>
                <label for="search-input" class="sr-only">Search</label>
                <input 
                    type="text" 
                    id="search-input" 
                    placeholder="Search for 'Google Classroom'..." 
                    class="w-full p-4 bg-gray-700 text-white rounded-lg border border-gray-600 focus-orbit transition-all"
                >
            </div>

            <!-- Message Area -->
            <div id="message-area" class="text-red-400 text-sm text-center hidden p-2 rounded-lg bg-red-900/20 border border-red-400/30">
                <!-- Error messages will be shown here -->
            </div>

            <!-- Search Engine Selector -->
            <fieldset class="grid grid-cols-3 gap-2">
                <legend class="sr-only">Select a search engine</legend>
                <div>
                    <input type="radio" id="engine-google" name="search-engine" value="google" class="sr-only search-engine-radio" checked>
                    <label for="engine-google" class="block w-full text-center p-2 rounded-md border border-gray-600 cursor-pointer hover:bg-gray-700 transition-colors">
                        Google
                    </label>
                </div>
                <div>
                    <input type="radio" id="engine-bing" name="search-engine" value="bing" class="sr-only search-engine-radio">
                    <label for="engine-bing" class="block w-full text-center p-2 rounded-md border border-gray-600 cursor-pointer hover:bg-gray-700 transition-colors">
                        Bing
                    </label>
                </div>
                <div>
                    <input type="radio" id="engine-duckduckgo" name="search-engine" value="duckduckgo" class="sr-only search-engine-radio">
                    <label for="engine-duckduckgo" class="block w-full text-center p-2 rounded-md border border-gray-600 cursor-pointer hover:bg-gray-700 transition-colors">
                        DuckDuckGo
                    </label>
                </div>
            </fieldset>
            
            <!-- Search Button -->
            <button 
                id="search-button"
                class="w-full p-4 bg-blue-600 text-white text-lg font-semibold rounded-lg hover:bg-blue-500 focus-orbit transition-colors duration-200"
            >
                Search
            </button>
        </div>
    </div>

    <!-- Search History -->
    <div class="w-full max-w-lg">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold text-gray-300">Search History</h2>
            <button id="clear-history" class="text-sm text-blue-400 hover:text-blue-300 focus-orbit rounded-md px-2 py-1">
                Clear History
            </button>
        </div>
        <div id="history-container" class="space-y-2">
            <!-- History items will be injected here -->
            <p id="no-history-message" class="text-gray-500 text-center">No searches yet.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button'); // <-- This line was missing/incorrect
            const historyContainer = document.getElementById('history-container');
            const noHistoryMessage = document.getElementById('no-history-message');
            const clearHistoryButton = document.getElementById('clear-history');
            const messageArea = document.getElementById('message-area');
            
            const HISTORY_KEY = 'orbitSearchHistory';
            const MAX_HISTORY_ITEMS = 10;

            // --- SafeSearch Blocklist ---
            // This is a small example list to show how the filter works.
            // A real app would have a much larger list of words.
            const blockedWords = [
                'filterme',
                'blockthis',
                'badword'
                // ... more words would be added here
            ];

            /**
             * Loads search history from localStorage and renders it.
             */
            function loadHistory() {
                const history = getHistory();
                renderHistory(history);
            }

            /**
             * Retrieves and parses history from localStorage.
             * @returns {string[]} An array of search queries.
             */
            function getHistory() {
                const historyJson = localStorage.getItem(HISTORY_KEY);
                return historyJson ? JSON.parse(historyJson) : [];
            }

            /**
             * Renders the history items to the page.
             * @param {string[]} history - An array of search queries.
             */
            function renderHistory(history) {
                // Clear existing history items
                historyContainer.innerHTML = ''; 

                if (history.length === 0) {
                    historyContainer.appendChild(noHistoryMessage);
                } else {
                    history.forEach(query => {
                        const historyItem = document.createElement('button');
                        historyItem.textContent = query;
                        historyItem.className = "w-full text-left p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors focus-orbit";
                        
                        // Add click event to re-search
                        historyItem.addEventListener('click', () => {
                            searchInput.value = query;
                            performSearch();
                        });
                        historyContainer.appendChild(historyItem);
                    });
                }
            }

            /**
             * Saves a new search query to the history.
             * @param {string} query - The search query to save.
             */
            function saveSearch(query) {
                let history = getHistory();
                
                // Remove existing instance of the query to avoid duplicates
                history = history.filter(item => item !== query);

                // Add new query to the top
                history.unshift(query);

                // Limit history size
                if (history.length > MAX_HISTORY_ITEMS) {
                    history = history.slice(0, MAX_HISTORY_ITEMS);
                }

                // Save back to localStorage
                localStorage.setItem(HISTORY_KEY, JSON.stringify(history));

                // Re-render the history list
                renderHistory(history);
            }

            /**
             * Clears all items from search history.
             */
            function clearHistory() {
                localStorage.removeItem(HISTORY_KEY);
                renderHistory([]);
            }

            /**
             * Checks if the query contains any blocked words.
             * @param {string} query - The search query to check.
             * @returns {boolean} - True if a blocked word is found, false otherwise.
             */
            function checkSafeSearch(query) {
                const lowerCaseQuery = query.toLowerCase();
                
                for (const blockedWord of blockedWords) {
                    // Check if the query contains the blocked word
                    if (lowerCaseQuery.includes(blockedWord)) {
                        return true; // Found a blocked word
                    }
                }
                return false; // No blocked words found
            }

            /**
             * Performs the search operation.
             * It formats the query, opens a new search tab, and saves the search.
             */
            function performSearch() {
                // 1. Get the raw query from the input and trim whitespace
                const rawQuery = searchInput.value.trim();

                // Clear any previous messages
                messageArea.textContent = '';
                messageArea.classList.add('hidden');

                // If the query is empty, do nothing
                if (rawQuery === "") {
                    return;
                }

                // --- SafeSearch Check ---
                if (checkSafeSearch(rawQuery)) {
                    messageArea.textContent = 'Your search contains words that are not allowed. Please try again.';
                    messageArea.classList.remove('hidden');
                    return; // Stop the search
                }
                // --- End SafeSearch Check ---

                // 2. Format the query: replace all spaces with '+'
                const formattedQuery = rawQuery.split(' ').join('+');

                // 3. Get the selected search engine
                const selectedEngine = document.querySelector('input[name="search-engine"]:checked').value;
                let searchUrl = '';

                // 4. Build the final search URL based on the engine
                switch (selectedEngine) {
                    case 'bing':
                        searchUrl = `https://www.bing.com/search?q=${formattedQuery}`;
                        break;
                    case 'duckduckgo':
                        searchUrl = `https://duckduckgo.com/?q=${formattedQuery}`;
                        break;
                    case 'google':
                    default:
                        searchUrl = `https://www.google.com/search?q=${formattedQuery}`;
                        break;
                }

                // 5. Open the search URL in a new browser tab
                window.open(searchUrl, '_blank');
                
                // 6. Save the search to history
                saveSearch(rawQuery);
            }

            // --- Event Listeners ---

            // Search button click
            searchButton.addEventListener('click', performSearch);

            // 'Enter' key in input field
            searchInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    performSearch();
                }
            });

            // Clear history button click
            clearHistoryButton.addEventListener('click', clearHistory);

            // Initial load of history on page start
            loadHistory();
        });
    </script>

</body>
</html>

